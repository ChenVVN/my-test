{"version":3,"file":"index.js","sources":["pages/room/index.vue","../../Users/xl/Downloads/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcm9vbS9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"room-number\">\r\n      <text class=\"prefix\">房间号：</text>\r\n      <span class=\"number\">{{ roomData.room_number }}</span></view\r\n    >\r\n    <!-- 桌面积分展示 -->\r\n    <view class=\"score-card\">\r\n      <text class=\"score-label\">桌面积分</text>\r\n      <text class=\"score-value\">{{ roomData.current_score }}</text>\r\n    </view>\r\n\r\n    <!-- <view class=\"user-text\">玩家列表</view> -->\r\n    <view class=\"member-list\">\r\n      <view\r\n        v-for=\"(member, memberIndex) in roomData.members\"\r\n        :key=\"memberIndex\"\r\n        class=\"member-item\"\r\n      >\r\n        <view class=\"order\">{{ memberIndex + 1 }}</view>\r\n        <view class=\"member-info\">\r\n          <image class=\"member-avatar\" :src=\"member.avatar\" />\r\n          <text class=\"member-name\">{{ member.nickname }}</text>\r\n        </view>\r\n        <view class=\"member-score\">{{ member.personal_score }}</view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 操作日志 -->\r\n    <view class=\"action-log\">\r\n      <scroll-view class=\"log-list\" scroll-y>\r\n        <view\r\n          v-for=\"(log, index) in roomData.logs\"\r\n          :key=\"index\"\r\n          class=\"log-item\"\r\n        >\r\n          <text class=\"time\">{{ formatTime(log.timestamp) }}</text>\r\n          {{ log.content }}\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n\r\n    <!-- 底部操作栏 -->\r\n    <view class=\"fixed-actions\">\r\n      <button class=\"action-btn out\" @click=\"openOut\">支 出</button>\r\n      <button class=\"action-btn in\" @click=\"openIn\">收 回</button>\r\n    </view>\r\n\r\n    <uni-popup ref=\"outPopup\" type=\"bottom\">\r\n      <view class=\"edit-box\">\r\n        <view class=\"input-box\">\r\n          <input\r\n            class=\"input\"\r\n            v-model=\"outValue\"\r\n            placeholder=\"输入支出数量\"\r\n            type=\"number\"\r\n          />\r\n          <button class=\"confirm-btn\" @click=\"handleOut\">确定</button>\r\n        </view>\r\n      </view>\r\n    </uni-popup>\r\n\r\n    <uni-popup ref=\"inPopup\" type=\"bottom\">\r\n      <view class=\"edit-box\">\r\n        <view class=\"input-box\">\r\n          <input\r\n            class=\"input\"\r\n            v-model=\"inValue\"\r\n            placeholder=\"输入收回数量\"\r\n            type=\"number\"\r\n          />\r\n\r\n          <view class=\"button-line\">\r\n            <view class=\"all-in-box\">全收</view>\r\n            <button class=\"confirm-btn\" @click=\"handleIn\">确定</button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </uni-popup>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from \"vue\";\r\n// import { formatTime } from '@/utils/util';\r\nimport { getCurrentUser } from \"@/utils/auth\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst roomWatcher = ref(null);\r\n\r\nconst formatTime = (timestamp) => {\r\n  return dayjs(timestamp).format(\"HH:mm:ss\");\r\n};\r\n// 初始化监听\r\nconst initWatch = () => {\r\n  const db = uniCloud.database();\r\n\r\n  // 关闭旧监听\r\n  if (roomWatcher.value) {\r\n    console.log(\"[监听] 关闭旧连接\");\r\n    roomWatcher.value.close();\r\n  }\r\n\r\n  console.log(\"[监听] 开始建立新连接，房间ID:\", roomData.value._id);\r\n  roomWatcher.value = db\r\n    .collection(\"rooms\")\r\n    .doc(roomData.value._id)\r\n    .watch({\r\n      onChange: (snapshot) => {\r\n        console.log(snapshot);\r\n\r\n        console.log(\"[监听成功] 收到变更:\", {\r\n          id: snapshot.id,\r\n          type: snapshot.type,\r\n          doc: snapshot.docs[0],\r\n        });\r\n        handleDataChange(snapshot);\r\n      },\r\n      onError: (err) => {\r\n        console.error(\"[监听错误]\", err);\r\n        uni.showToast({\r\n          title: \"连接中断，正在重连...\",\r\n          icon: \"none\",\r\n        });\r\n        setTimeout(initWatch, 5000);\r\n      },\r\n    });\r\n\r\n  console.log(roomWatcher.value);\r\n};\r\n\r\n// 处理数据变化\r\nconst handleDataChange = (snapshot) => {\r\n  console.log(\"触发监听变更\", snapshot);\r\n\r\n  if (snapshot.docs && snapshot.docs.length > 0) {\r\n    const newData = snapshot.docs[0];\r\n\r\n    // 调试日志\r\n    console.log(\"[监听触发] 变更类型:\", snapshot.type);\r\n    console.log(\r\n      \"[数据对比] 旧版本:\",\r\n      roomData.value.version,\r\n      \"新版本:\",\r\n      newData.version\r\n    );\r\n\r\n    // 强制触发视图更新\r\n    roomData.value = {\r\n      ...newData,\r\n      // 保持响应式\r\n      members: [...newData.members],\r\n      logs: [...newData.logs],\r\n    };\r\n\r\n    // 滚动日志到底部\r\n    nextTick(() => {\r\n      const query = uni.createSelectorQuery().in(this);\r\n      query\r\n        .select(\".log-list\")\r\n        .boundingClientRect((data) => {\r\n          if (data) {\r\n            uni.pageScrollTo({\r\n              scrollTop: data.height,\r\n              duration: 300,\r\n            });\r\n          }\r\n        })\r\n        .exec();\r\n    });\r\n  }\r\n};\r\n\r\n// 显示操作通知\r\nconst showOperationNotice = (log) => {\r\n  const user = roomData.value.members.find((m) => m.user_id === log.user_id);\r\n  const nickName = user?.nickname || \"未知用户\";\r\n\r\n  switch (log.type) {\r\n    case \"join\":\r\n      uni.showToast({\r\n        title: `${nickName} 加入了房间`,\r\n        icon: \"none\",\r\n      });\r\n      break;\r\n    case \"out\":\r\n      uni.showToast({\r\n        title: `${nickName} 支出了 ${log.amount}分`,\r\n        icon: \"none\",\r\n      });\r\n      break;\r\n    case \"in\":\r\n      uni.showToast({\r\n        title: `${nickName} 收回了 ${log.amount}分`,\r\n        icon: \"none\",\r\n      });\r\n      break;\r\n  }\r\n};\r\n// 错误处理\r\nconst handleWatchError = (err) => {\r\n  console.error(\"实时监听失败:\", err);\r\n  uni.showToast({\r\n    title: \"实时连接中断，请刷新页面\",\r\n    icon: \"none\",\r\n  });\r\n};\r\n\r\nconst roomData = ref({\r\n  room_number: \"\",\r\n  current_score: 0,\r\n  members: [],\r\n  logs: [],\r\n});\r\n\r\nconst outValue = ref(\"\");\r\nconst inValue = ref(\"\");\r\nconst outPopup = ref(null);\r\nconst inPopup = ref(null);\r\n\r\nconst userInfo = ref({});\r\n\r\nconst openOut = () => {\r\n  outPopup.value.open(\"bottom\");\r\n};\r\n\r\nconst handleOut = async () => {\r\n  try {\r\n    const res = await uniCloud.callFunction({\r\n      name: \"score_out\",\r\n      data: {\r\n        roomId: roomData.value._id,\r\n        userInfo: userInfo.value,\r\n        amount: Number(outValue.value),\r\n      },\r\n    });\r\n\r\n    if (res.result.code === 200) {\r\n      uni.showToast({ title: \"支出成功\" });\r\n      // 强制刷新数据\r\n      await loadRoomData();\r\n      outPopup.value.close();\r\n    }\r\n  } catch (e) {\r\n    uni.showToast({ title: e.message, icon: \"none\" });\r\n  }\r\n};\r\n\r\nconst openIn = () => {\r\n  inPopup.value.open(\"bottom\");\r\n};\r\n\r\nconst handleIn = async () => {\r\n  if (Number(inValue.value) > roomData.value.current_score) {\r\n    uni.showToast({\r\n      title: \"收回积分应小于或等于当前桌面积分\",\r\n      icon: \"none\",\r\n    });\r\n    return;\r\n  }\r\n  try {\r\n    const res = await uniCloud.callFunction({\r\n      name: \"score_in\",\r\n      data: {\r\n        roomId: roomData.value._id,\r\n        userInfo: userInfo.value,\r\n        amount: Number(inValue.value),\r\n      },\r\n    });\r\n\r\n    if (res.result.code === 200) {\r\n      inPopup.value.close();\r\n      // 强制刷新数据\r\n      await loadRoomData();\r\n    }\r\n    console.log(\"收回\", res);\r\n\r\n    uni.showToast({ title: res.result.msg });\r\n  } catch (e) {\r\n    uni.showToast({ title: e.message, icon: \"none\" });\r\n  }\r\n};\r\n\r\nconst roomNumber = ref(\"\");\r\n\r\nonMounted(async () => {\r\n  // 从URL参数获取房间号\r\n  const params = getCurrentPages().pop().options;\r\n\r\n  roomNumber.value = params.room_number;\r\n  console.log(roomNumber.value);\r\n\r\n  userInfo.value = getCurrentUser();\r\n\r\n  // 先加载数据再初始化监听\r\n  await loadRoomData();\r\n  console.log(\"房间数据加载完成:\", roomData.value._id); // 调试点2\r\n\r\n  initWatch();\r\n});\r\n\r\nonUnmounted(() => {\r\n  roomWatcher.value && roomWatcher.value.close();\r\n});\r\n\r\nconst loadRoomData = async () => {\r\n  try {\r\n    const res = await uniCloud.callFunction({\r\n      name: \"get_room_info\",\r\n      data: { room_number: roomNumber.value },\r\n    });\r\n\r\n    if (res.result.code === 200) {\r\n      roomData.value = res.result.data;\r\n      console.log(res);\r\n    } else {\r\n      handleError(res.result.msg);\r\n    }\r\n  } catch (e) {\r\n    handleError(e.message);\r\n  }\r\n};\r\n\r\nconst handleError = (msg) => {\r\n  uni.showToast({ title: msg || \"数据加载失败\", icon: \"none\" });\r\n  setTimeout(() => uni.navigateBack(), 1500);\r\n};\r\n\r\nconst logs = [\r\n  {\r\n    time: \"12:00\",\r\n    content: \"wnccc 加入房间\",\r\n    type: \"join\",\r\n  },\r\n  {\r\n    time: \"12:05\",\r\n    content: \"wnccc 支出2\",\r\n    type: \"action\",\r\n  },\r\n  {\r\n    time: \"12:10\",\r\n    content: \"wnccc 收回43\",\r\n    type: \"score-up\",\r\n  },\r\n];\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.container {\r\n  padding: 0 30rpx;\r\n  height: 100vh;\r\n  padding-bottom: 160rpx; // 给底部操作栏留出空间\r\n  background: #f8f9fa;\r\n}\r\n\r\n/* 房间号样式 */\r\n.room-number {\r\n  padding: 10rpx 0;\r\n  background: transparent; // 移除背景色\r\n  border-radius: 16rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: all 0.3s ease;\r\n\r\n  // &::before {\r\n  //   content: \"\";\r\n  //   position: absolute;\r\n  //   top: 0;\r\n  //   left: 0;\r\n  //   right: 0;\r\n  //   height: 4rpx;\r\n  //   background: linear-gradient(\r\n  //     90deg,\r\n  //     rgba(46, 204, 113, 0.6) 0%,\r\n  //     rgba(52, 152, 219, 0.6) 50%,\r\n  //     rgba(155, 89, 182, 0.6) 100%\r\n  //   );\r\n  //   animation: gradientFlow 3s infinite linear;\r\n  // }\r\n\r\n  .prefix {\r\n    font-size: 22rpx;\r\n    color: #7f8c8d;\r\n    letter-spacing: 2rpx;\r\n  }\r\n\r\n  .number {\r\n    font-family: \"DIN Alternate\", sans-serif;\r\n    font-size: 40rpx; // 缩小字号\r\n    color: #2c3e50;\r\n    letter-spacing: 3rpx;\r\n    position: relative;\r\n    display: inline-block;\r\n    padding: 0 10rpx;\r\n    background: linear-gradient(45deg, #3498db 25%, #2ecc71 50%, #e74c3c 75%);\r\n    -webkit-background-clip: text;\r\n    background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    background-size: 400% 400%;\r\n    animation: gradientShift 6s ease infinite;\r\n    font-weight: 700;\r\n  }\r\n}\r\n\r\n.score-card {\r\n  background: #fff;\r\n  border-radius: 20rpx;\r\n  padding: 20rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\r\n  .score-label {\r\n    display: block;\r\n    font-size: 28rpx;\r\n    color: #666;\r\n    margin-bottom: 15rpx;\r\n    text-align: center;\r\n  }\r\n\r\n  .score-value {\r\n    display: block;\r\n    font-size: 55rpx;\r\n    color: #07c160;\r\n    font-weight: bold;\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n.user-text {\r\n  margin: 15rpx 0 0;\r\n  font-size: 22rpx;\r\n  color: #7f8c8d;\r\n  letter-spacing: 2rpx;\r\n}\r\n\r\n.member-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 25rpx;\r\n  margin-top: 20rpx;\r\n\r\n  .member-item {\r\n    width: 16%;\r\n    background: #fff;\r\n    border-radius: 16rpx;\r\n    padding: 20rpx;\r\n    box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);\r\n    border: 2rpx solid #eee;\r\n    transition: all 0.3s ease;\r\n    position: relative;\r\n    .order {\r\n      height: 30rpx;\r\n      width: 30rpx;\r\n      text-align: center;\r\n      font-size: 20rpx;\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      background: #5ab4e8;\r\n      color: #fff;\r\n      border-radius: 16rpx 0 13rpx 0;\r\n    }\r\n\r\n    .member-info {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      margin-bottom: 10rpx;\r\n\r\n      .member-avatar {\r\n        width: 60rpx;\r\n        height: 60rpx;\r\n        border-radius: 50%;\r\n        border: 4rpx solid #f5f5f5;\r\n        margin-bottom: 8rpx;\r\n      }\r\n\r\n      .member-name {\r\n        font-size: 28rpx;\r\n        color: #333;\r\n        max-width: 200rpx;\r\n      }\r\n    }\r\n\r\n    .member-score {\r\n      text-align: center;\r\n      font-size: 36rpx;\r\n      color: #07c160;\r\n      font-weight: 600;\r\n      padding: 10rpx;\r\n      background: #f5fff9;\r\n      border-radius: 8rpx;\r\n    }\r\n  }\r\n}\r\n\r\n/* 操作日志区域 */\r\n.action-log {\r\n  margin: 30rpx 0;\r\n  background: #fff;\r\n  border-radius: 12rpx;\r\n  padding: 20rpx;\r\n  height: 400rpx;\r\n  overflow-y: auto;\r\n  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\r\n  .log-list {\r\n    height: 100%;\r\n    overflow-y: auto;\r\n\r\n    .log-item {\r\n      padding: 15rpx 0;\r\n      border-bottom: 1rpx solid #eee;\r\n      font-size: 26rpx;\r\n\r\n      &:last-child {\r\n        border-bottom: none;\r\n      }\r\n\r\n      .time {\r\n        color: #999;\r\n        margin-right: 20rpx;\r\n      }\r\n\r\n      &.join {\r\n        color: #2979ff;\r\n      }\r\n\r\n      &.out {\r\n        color: #07c160;\r\n      }\r\n\r\n      &.in {\r\n        color: #ff9500;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/* 底部固定操作栏 */\r\n.fixed-actions {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background: #fff;\r\n  padding: 20rpx 30rpx;\r\n  box-shadow: 0 -4rpx 16rpx rgba(0, 0, 0, 0.05);\r\n  display: flex;\r\n  gap: 20rpx;\r\n  z-index: 10;\r\n\r\n  .action-btn {\r\n    flex: 1;\r\n    height: 100rpx;\r\n    border-radius: 50rpx;\r\n    font-size: 32rpx;\r\n    font-weight: bold;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: all 0.2s;\r\n\r\n    &:active {\r\n      transform: scale(0.95);\r\n    }\r\n\r\n    &.out {\r\n      background: linear-gradient(135deg, #07c160, #05a854);\r\n      color: #fff;\r\n      box-shadow: 0 4rpx 12rpx rgba(7, 193, 96, 0.3);\r\n    }\r\n\r\n    &.in {\r\n      background: linear-gradient(135deg, #ff9500, #ff7f00);\r\n      color: #fff;\r\n      box-shadow: 0 4rpx 12rpx rgba(255, 149, 0, 0.3);\r\n    }\r\n  }\r\n}\r\n\r\n.edit-box {\r\n  background: #fff;\r\n  padding: 40rpx;\r\n  border-radius: 20rpx 20rpx 0 0;\r\n  margin-bottom: -24px;\r\n\r\n  .input {\r\n    height: 100rpx;\r\n    border: 2rpx solid #eee;\r\n    border-radius: 10rpx;\r\n    padding: 0 20rpx;\r\n    margin-bottom: 30rpx;\r\n  }\r\n  .button-line {\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n    .all-in-box {\r\n      flex: 1;\r\n      height: 80rpx;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      background: #e44a2f;\r\n      color: #fff;\r\n      border-radius: 50rpx;\r\n      margin-right: 10px;\r\n    }\r\n    .confirm-btn {\r\n      flex: 1;\r\n      margin-left: 10px;\r\n      background: #07c160;\r\n      color: #fff;\r\n      border-radius: 50rpx;\r\n      height: 80rpx;\r\n      line-height: 80rpx;\r\n    }\r\n  }\r\n\r\n  .confirm-btn {\r\n    margin-left: 10px;\r\n    background: #07c160;\r\n    color: #fff;\r\n    border-radius: 50rpx;\r\n    height: 80rpx;\r\n    line-height: 80rpx;\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/mytest/chip/pages/room/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","dayjs","uniCloud","uni","onMounted","getCurrentUser","onUnmounted"],"mappings":"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"}