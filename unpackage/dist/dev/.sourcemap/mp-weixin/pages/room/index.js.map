{"version":3,"file":"index.js","sources":["pages/room/index.vue","../../Users/xl/Downloads/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcm9vbS9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"room-number\">\r\n      <text class=\"prefix\">房间号：</text>\r\n      <span class=\"number\">{{ roomData.room_number }}</span></view\r\n    >\r\n    <!-- 桌面积分展示 -->\r\n    <view class=\"score-card\">\r\n      <text class=\"score-label\">桌面积分</text>\r\n      <text class=\"score-value\">234</text>\r\n    </view>\r\n    <!-- 操作日志 -->\r\n    <view class=\"action-log\">\r\n      <scroll-view class=\"log-list\" scroll-y>\r\n        <view\r\n          v-for=\"(log, index) in logs\"\r\n          :key=\"index\"\r\n          class=\"log-item\"\r\n          :class=\"log.type\"\r\n        >\r\n          <text class=\"time\">{{ log.time }}</text>\r\n          {{ log.content }}\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n    <!-- <view class=\"user-text\">玩家列表</view> -->\r\n    <view class=\"member-list\">\r\n      <view\r\n        v-for=\"(member, memberIndex) in 5\"\r\n        :key=\"memberIndex\"\r\n        class=\"member-item\"\r\n      >\r\n        <view class=\"order\">{{ memberIndex + 1 }}</view>\r\n        <view class=\"member-info\">\r\n          <image class=\"member-avatar\" src=\"/static/user-avatar.png\" />\r\n          <text class=\"member-name\">wnccc</text>\r\n        </view>\r\n        <view class=\"member-score\">0</view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 底部操作栏 -->\r\n    <view class=\"fixed-actions\">\r\n      <button class=\"action-btn out\" @click=\"handleOut\">支 出</button>\r\n      <button class=\"action-btn in\" @click=\"handleIn\">收 回</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\n// import { formatTime } from '@/utils/util';\r\n\r\nconst roomData = ref({\r\n  room_number: \"\",\r\n  current_score: 0,\r\n  members: [],\r\n  logs: [],\r\n});\r\n\r\nconst roomNumber = ref(\"\");\r\n\r\nonMounted(async () => {\r\n  // 从URL参数获取房间号\r\n  const params = getCurrentPages().pop().options;\r\n\r\n  roomNumber.value = params.room_number;\r\n  console.log(roomNumber.value);\r\n\r\n  loadRoomData();\r\n});\r\n\r\nconst loadRoomData = async () => {\r\n  try {\r\n    const res = await uniCloud.callFunction({\r\n      name: \"get_room_info\",\r\n      data: { room_number: roomNumber.value },\r\n    });\r\n\r\n    if (res.result.code === 200) {\r\n      roomData.value = res.result.data;\r\n      console.log(res);\r\n    } else {\r\n      handleError(res.result.msg);\r\n    }\r\n  } catch (e) {\r\n    handleError(e.message);\r\n  }\r\n};\r\n\r\nconst handleError = (msg) => {\r\n  uni.showToast({ title: msg || \"数据加载失败\", icon: \"none\" });\r\n  setTimeout(() => uni.navigateBack(), 1500);\r\n};\r\n\r\nconst logs = [\r\n  {\r\n    time: \"12:00\",\r\n    content: \"wnccc 加入房间\",\r\n    type: \"join\",\r\n  },\r\n  {\r\n    time: \"12:05\",\r\n    content: \"wnccc 支出2\",\r\n    type: \"action\",\r\n  },\r\n  {\r\n    time: \"12:10\",\r\n    content: \"wnccc 收回43\",\r\n    type: \"score-up\",\r\n  },\r\n];\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.container {\r\n  padding: 30rpx;\r\n  height: 100vh;\r\n  padding-bottom: 160rpx; // 给底部操作栏留出空间\r\n  background: #f8f9fa;\r\n}\r\n\r\n/* 房间号样式 */\r\n.room-number {\r\n  padding: 10rpx 0;\r\n  background: transparent; // 移除背景色\r\n  border-radius: 16rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: all 0.3s ease;\r\n\r\n  // &::before {\r\n  //   content: \"\";\r\n  //   position: absolute;\r\n  //   top: 0;\r\n  //   left: 0;\r\n  //   right: 0;\r\n  //   height: 4rpx;\r\n  //   background: linear-gradient(\r\n  //     90deg,\r\n  //     rgba(46, 204, 113, 0.6) 0%,\r\n  //     rgba(52, 152, 219, 0.6) 50%,\r\n  //     rgba(155, 89, 182, 0.6) 100%\r\n  //   );\r\n  //   animation: gradientFlow 3s infinite linear;\r\n  // }\r\n\r\n  .prefix {\r\n    font-size: 22rpx;\r\n    color: #7f8c8d;\r\n    letter-spacing: 2rpx;\r\n  }\r\n\r\n  .number {\r\n    font-family: \"DIN Alternate\", sans-serif;\r\n    font-size: 40rpx; // 缩小字号\r\n    color: #2c3e50;\r\n    letter-spacing: 3rpx;\r\n    position: relative;\r\n    display: inline-block;\r\n    padding: 0 10rpx;\r\n    background: linear-gradient(45deg, #3498db 25%, #2ecc71 50%, #e74c3c 75%);\r\n    -webkit-background-clip: text;\r\n    background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    background-size: 400% 400%;\r\n    animation: gradientShift 6s ease infinite;\r\n    font-weight: 700;\r\n  }\r\n}\r\n\r\n.score-card {\r\n  background: #fff;\r\n  border-radius: 20rpx;\r\n  padding: 20rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\r\n  .score-label {\r\n    display: block;\r\n    font-size: 28rpx;\r\n    color: #666;\r\n    margin-bottom: 15rpx;\r\n    text-align: center;\r\n  }\r\n\r\n  .score-value {\r\n    display: block;\r\n    font-size: 55rpx;\r\n    color: #07c160;\r\n    font-weight: bold;\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n.user-text {\r\n  margin: 15rpx 0 0;\r\n  font-size: 22rpx;\r\n  color: #7f8c8d;\r\n  letter-spacing: 2rpx;\r\n}\r\n\r\n.member-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 25rpx;\r\n  margin-top: 20rpx;\r\n\r\n  .member-item {\r\n    width: 16%;\r\n    background: #fff;\r\n    border-radius: 16rpx;\r\n    padding: 20rpx;\r\n    box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);\r\n    border: 2rpx solid #eee;\r\n    transition: all 0.3s ease;\r\n    position: relative;\r\n    .order {\r\n      height: 30rpx;\r\n      width: 30rpx;\r\n      text-align: center;\r\n      font-size: 20rpx;\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      background: #5ab4e8;\r\n      color: #fff;\r\n      border-radius: 16rpx 0 13rpx 0;\r\n    }\r\n\r\n    .member-info {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      margin-bottom: 10rpx;\r\n\r\n      .member-avatar {\r\n        width: 60rpx;\r\n        height: 60rpx;\r\n        border-radius: 50%;\r\n        border: 4rpx solid #f5f5f5;\r\n        margin-bottom: 8rpx;\r\n      }\r\n\r\n      .member-name {\r\n        font-size: 28rpx;\r\n        color: #333;\r\n        max-width: 200rpx;\r\n      }\r\n    }\r\n\r\n    .member-score {\r\n      text-align: center;\r\n      font-size: 36rpx;\r\n      color: #07c160;\r\n      font-weight: 600;\r\n      padding: 10rpx;\r\n      background: #f5fff9;\r\n      border-radius: 8rpx;\r\n    }\r\n  }\r\n}\r\n\r\n/* 操作日志区域 */\r\n.action-log {\r\n  margin: 30rpx 0;\r\n  background: #fff;\r\n  border-radius: 12rpx;\r\n  padding: 20rpx;\r\n  height: 400rpx;\r\n  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\r\n  .log-list {\r\n    height: 100%;\r\n    overflow-y: auto;\r\n\r\n    .log-item {\r\n      padding: 15rpx 0;\r\n      border-bottom: 1rpx solid #eee;\r\n      font-size: 26rpx;\r\n\r\n      &:last-child {\r\n        border-bottom: none;\r\n      }\r\n\r\n      .time {\r\n        color: #999;\r\n        margin-right: 20rpx;\r\n      }\r\n\r\n      &.join {\r\n        color: #2979ff;\r\n      }\r\n\r\n      &.out {\r\n        color: #07c160;\r\n      }\r\n\r\n      &.in {\r\n        color: #ff9500;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/* 底部固定操作栏 */\r\n.fixed-actions {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background: #fff;\r\n  padding: 20rpx 30rpx;\r\n  box-shadow: 0 -4rpx 16rpx rgba(0, 0, 0, 0.05);\r\n  display: flex;\r\n  gap: 20rpx;\r\n  z-index: 10;\r\n\r\n  .action-btn {\r\n    flex: 1;\r\n    height: 100rpx;\r\n    border-radius: 50rpx;\r\n    font-size: 32rpx;\r\n    font-weight: bold;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: all 0.2s;\r\n\r\n    &:active {\r\n      transform: scale(0.95);\r\n    }\r\n\r\n    &.out {\r\n      background: linear-gradient(135deg, #07c160, #05a854);\r\n      color: #fff;\r\n      box-shadow: 0 4rpx 12rpx rgba(7, 193, 96, 0.3);\r\n    }\r\n\r\n    &.in {\r\n      background: linear-gradient(135deg, #ff9500, #ff7f00);\r\n      color: #fff;\r\n      box-shadow: 0 4rpx 12rpx rgba(255, 149, 0, 0.3);\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/mytest/chip/pages/room/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","uniCloud"],"mappings":";;;;;;AAqDA,UAAM,WAAWA,cAAAA,IAAI;AAAA,MACnB,aAAa;AAAA,MACb,eAAe;AAAA,MACf,SAAS,CAAE;AAAA,MACX,MAAM,CAAE;AAAA,IACV,CAAC;AAED,UAAM,aAAaA,cAAAA,IAAI,EAAE;AAEzBC,kBAAAA,UAAU,YAAY;AAEpB,YAAM,SAAS,gBAAe,EAAG,IAAG,EAAG;AAEvC,iBAAW,QAAQ,OAAO;AAC1BC,qEAAY,WAAW,KAAK;AAE5B;IACF,CAAC;AAED,UAAM,eAAe,YAAY;AAC/B,UAAI;AACF,cAAM,MAAM,MAAMC,cAAQ,GAAC,aAAa;AAAA,UACtC,MAAM;AAAA,UACN,MAAM,EAAE,aAAa,WAAW,MAAO;AAAA,QAC7C,CAAK;AAED,YAAI,IAAI,OAAO,SAAS,KAAK;AAC3B,mBAAS,QAAQ,IAAI,OAAO;AAC5BD,wBAAAA,MAAY,MAAA,OAAA,8BAAA,GAAG;AAAA,QACrB,OAAW;AACL,sBAAY,IAAI,OAAO,GAAG;AAAA,QAC3B;AAAA,MACF,SAAQ,GAAG;AACV,oBAAY,EAAE,OAAO;AAAA,MACtB;AAAA,IACH;AAEA,UAAM,cAAc,CAAC,QAAQ;AAC3BA,0BAAI,UAAU,EAAE,OAAO,OAAO,UAAU,MAAM,OAAM,CAAE;AACtD,iBAAW,MAAMA,cAAG,MAAC,aAAc,GAAE,IAAI;AAAA,IAC3C;AAEA,UAAM,OAAO;AAAA,MACX;AAAA,QACE,MAAM;AAAA,QACN,SAAS;AAAA,QACT,MAAM;AAAA,MACP;AAAA,MACD;AAAA,QACE,MAAM;AAAA,QACN,SAAS;AAAA,QACT,MAAM;AAAA,MACP;AAAA,MACD;AAAA,QACE,MAAM;AAAA,QACN,SAAS;AAAA,QACT,MAAM;AAAA,MACP;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;AC9GA,GAAG,WAAW,eAAe;"}